<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Otwieranie Skrzynek</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      padding: 30px;
      text-align: center;
    }
    
    h1 {
      margin-bottom: 20px;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    #recent-drops {
      margin-top: 20px;
      background: #fff;
      padding: 15px;
      border-radius: 5px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
      color: black;
    }
    .drop-entry {
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      color: black;
    }
    .drop-entry img {
      width: 80px;
      height: 80px;
      margin-right: 15px;
    }
    #gold-info, #gems-info {
      font-size: 18px;
      margin-top: 10px;
      font-weight: bold;
      color: rgb(241, 238, 238);
    }
    #cards {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
      color: black;
    }
    .card-entry {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 130px;
      background: #fff;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
      text-align: center;
      cursor: pointer;
    }
    .card-entry img {
      width: 100px;
      height: 100px;
      margin-bottom: 8px;
      border-radius: 5px;
    }
    .max-level {
      background: linear-gradient(135deg, gold, orange);
    }
    body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(-45deg, #1a1a2e, #16213e, #0f3460, #533483);
  background-size: 400% 400%;
  animation: gradientMove 15s ease infinite;
  color: white;
}
.card {
  color: black; /* przywraca czcionkƒô kart */
}

@keyframes gradientMove {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

#upgrade-modal-bg {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.6);
  justify-content: center;
  align-items: center;
}

/* Modal okno */
#upgrade-modal {
  background: #1e1e2f;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
  color: white;
  max-width: 350px;
  box-shadow: 0 0 15px rgba(0,0,0,0.5);
}

#upgrade-modal img {
  width: 100px;
  border-radius: 8px;
  margin-bottom: 10px;
}

#upgrade-modal h3 {
  margin: 10px 0;
}

.modal-buttons {
  margin-top: 15px;
  display: flex;
  justify-content: space-around;
}

.modal-btn {
  padding: 8px 15px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
  font-weight: bold;
}

.btn-upgrade {
  background: linear-gradient(90deg, gold, orange);
  color: black;
}

.btn-cancel {
  background: #555;
  color: white;
}

.diamond-level {
  background: linear-gradient(135deg, #00c6ff, #0072ff, #b3ffff);
  background-size: 400% 400%;
  animation: diamondGlow 3s ease infinite;
  color: black;
  border: 2px solid #66ffff;
  box-shadow: 0 0 10px rgba(0, 255, 255, 0.7);
}

@keyframes diamondGlow {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

.level-two {
  background: linear-gradient(135deg, #d3d3d3, #a9a9a9);
  color: black;
  border: 2px solid #888;
}
  </style>
</head>
<body>
  <h1>‚ú® Otwieranie Skrzynek ‚ú®</h1>
<p>UWAGA nie ulepszaƒá na 3lvl je≈õli masz idealnie np. 10/10 bo zniknƒÖ i nigdy ju≈º siƒô nie pojawiƒÖ, ZAWSZE musisz mieƒá chocia≈º 1 wiƒôcej</p>

  <button onclick="otworzSkrzynke()">üîê Otw√≥rz skrzynkƒô</button>
  <button onclick="otworzZlotaSkrzynie()">üëë Z≈Çota skrzynia (500 z≈Çota)</button>
  <button onclick="otworzLegendarnaSkrzynia()">üèÜ Legendarna skrzynia (50 üíé)</button>
  
  <div id="recent-drops"></div>
  <div id="gold-info"></div>
  <div id="gems-info"></div>
  <div id="cards"></div>

  <div id="upgrade-modal-bg">
    <div id="upgrade-modal">
      <img id="upgrade-img" src="" alt="">
      <h3 id="upgrade-title"></h3>
      <p id="upgrade-info"></p>
      <div class="modal-buttons">
        <button class="modal-btn btn-upgrade" onclick="confirmUpgrade()">Ulepsz</button>
        <button class="modal-btn btn-cancel" onclick="closeUpgradeModal()">Anuluj</button>
      </div>
    </div>
  </div>

  <script>
    const rarityConfig = {
      "pospolita": { chance: 0.4, amount: [200, 500], upgradeCost: { 1: { cards: 200, gold: 200 }, 2: { cards: 500, gold: 500 }, 3: { cards: 1000, gems: 25, gold: 500 } } },
      "rzadka":    { chance: 0.3, amount: [50, 100], upgradeCost: { 1: { cards: 100, gold: 200 }, 2: { cards: 200, gold: 500 }, 3: { cards: 300, gems: 25, gold: 500 } } },
      "epicka":    { chance: 0.2, amount: [20, 40],  upgradeCost: { 1: { cards: 20,  gold: 200 }, 2: { cards: 40,  gold: 500 }, 3: { cards: 60, gems: 25, gold: 500 } } },
      "legendarna":{ chance: 0.1, amount: [5, 10], upgradeCost: { 1: { cards: 5,   gold: 200 }, 2: { cards: 10,   gold: 500 }, 3: { cards: 20, gems: 25, gold: 500 } } },
    };

    const cardPool = {
      pospolita: [
        { name: "Czarny Wdowiec", image: "grafiki/Swdowa.jpg" },
        { name: "Uma", image: "grafiki/Suma.jpg" },
        { name: "Pobin", image: "grafiki/Ppobin.jpg" },
        { name: "Plebs", image: "grafiki/Pplebs.jpg" },
        { name: "G≈Çupia g≈Çowa", image: "grafiki/Pmimir.jpg" },
        { name: "Marcin Stark", image: "grafiki/Mstark.jpg" },
        { name: "Mrost", image: "grafiki/Mrost.jpg" },
        { name: "Czoker", image: "grafiki/Mjoker.jpg" },
        { name: "Luna Plus Size", image: "grafiki/Mlun.jpg" },
        { name: "Iron Gej", image: "grafiki/Piro.jpg" },
        { name: "Czo≈Çgista", image: "grafiki/Mczo.jpg" },
        { name: "Czop Kennedy", image: "grafiki/Mleo.jpg" },
        { name: "Babka z wnusiem", image: "grafiki/Prod.jpg" },
        { name: "Czop von Doom", image: "grafiki/Mdoo.jpg" },
        { name: "Deddie", image: "grafiki/Dedd.jpg" },
        { name: "Maria Nowak", image: "grafiki/Dmar.jpg" }
      ],
      rzadka: [
        { name: "≈ömiertkeus", image: "grafiki/Satr.jpg" },
        { name: "Ruda baba", image: "grafiki/Saloy.jpg" },
        { name: "Oldur", image: "grafiki/Obal.jpg" },
        { name: "Punishczop", image: "grafiki/Mpunish.jpg" },
        { name: "Kodyn", image: "grafiki/Kodyn.jpg" },
        { name: "Dziadoki", image: "grafiki/Dlok.jpg" },
        { name: "Bia≈Çy Blade", image: "grafiki/Kble.jpg" },
        { name: "Idolka", image: "grafiki/Oido.jpg" },
        { name: "Ma≈Çy Dziadek", image: "grafiki/Dhol.jpg" },
        { name: "Eldeniarze", image: "grafiki/KDeld.jpg" },
        { name: "Olfield", image: "grafiki/Ored.jpg" },
        { name: "Wilcza Paszcza", image: "grafiki/Oeiv.jpg" },
        { name: "Kapitan Kenway", image: "grafiki/Kken.jpg" },
        { name: "James Nowak", image: "grafiki/Mjam.jpg" }
      ],
      epicka: [
        { name: "Szkar≈Çatna wied≈∫ma", image: "grafiki/Owanda.jpg" },
        { name: "Liga Tropicieli", image: "grafiki/OKMliga.jpg" },
        { name: "Dziwak", image: "grafiki/Kstrange.jpg" },
        { name: "Smeskel i Kambert", image: "grafiki/KSlamesk.jpg" },
        { name: "Pedro Molesto", image: "grafiki/Ofan.jpg" },
        { name: "Mamu≈õka", image: "grafiki/Demm.jpg" },
        { name: "Kapitan Aborcja", image: "grafiki/Kkap.jpg" },
        { name: "Marcin Kestis", image: "grafiki/Mcal.jpg" },
        { name: "Kacperberg", image: "grafiki/Khei.jpg" },
        { name: "Spartanka", image: "grafiki/Dkas.jpg" },
        { name: "Wybra≈Ñcy Kkonshu", image: "grafiki/OKwyb.jpg" }
      ],
      legendarna: [
        { name: "Lady Dziadek", image: "grafiki/Slady.jpg" },
        { name: "Olgierd", image: "grafiki/Olgierd.jpg" },
        { name: "Czysty Chaos", image: "grafiki/OKws.jpg" },
        { name: "God of Hunger", image: "grafiki/Mgoh.jpg" },
        { name: "Czop z Wiejskiej", image: "grafiki/Mgeralt.jpg" },
        { name: "Fatbat", image: "grafiki/Mfatbat.jpg" },
        { name: "Kong-wu", image: "grafiki/Kwuk.jpg" },
        { name: "Dziadek Wong", image: "grafiki/Dwon.jpg" },
        { name: "Czop Auditore da Wiejska", image: "grafiki/Mezi.jpg" }
      ]
    };

    let player = JSON.parse(localStorage.getItem("playerData")) || {
      gold: 0,
      gems: 0,
      cards: {},
      dailyOpens: 0,
      lastOpenDate: ""
    };

    function savePlayer() {
      localStorage.setItem("playerData", JSON.stringify(player));
    }

    function losujRzadkosc() {
      const roll = Math.random();
      let cumulative = 0;
      for (const rarity in rarityConfig) {
        cumulative += rarityConfig[rarity].chance;
        if (roll < cumulative) return rarity;
      }
      return "pospolita";
    }

    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function resetDailyOpensIfNewDay() {
      const today = new Date().toDateString();
      if (player.lastOpenDate !== today) {
        player.dailyOpens = 0;
        player.lastOpenDate = today;
        savePlayer();
      }
    }

    function otworzSkrzynke() {
      resetDailyOpensIfNewDay();
      if (player.dailyOpens >= 1) {
        alert("OsiƒÖgnƒÖ≈Çe≈õ dzienny limit 5 skrzy≈Ñ!");
        return;
      }

      const recentDiv = document.getElementById("recent-drops");
      recentDiv.innerHTML = `<h3>üéÅ Wypad≈Ço z ostatniej skrzynki:</h3>`;

      const gold = getRandomInt(1, 200);
      const gems = getRandomInt(1, 5);
      player.gold += gold;
      player.gems += gems;
      recentDiv.innerHTML += `<div class="drop-entry"><strong>üí∞ ${gold} z≈Çota</strong></div>`;
      recentDiv.innerHTML += `<div class="drop-entry"><strong>üíé ${gems} gem√≥w</strong></div>`;

      for (let i = 0; i < 5; i++) {
        const rarity = losujRzadkosc();
        let availableCards = cardPool[rarity].filter(card => {
          let data = player.cards[card.name];
          return !data || data.level < 4;
        });
        if (availableCards.length === 0) continue;

        const chosen = availableCards[getRandomInt(0, availableCards.length - 1)];
        const [min, max] = rarityConfig[rarity].amount;
        const amount = getRandomInt(min, max);

        if (!player.cards[chosen.name]) {
          player.cards[chosen.name] = { count: 0, level: 1, rarity: rarity, image: chosen.image };
        }

        player.cards[chosen.name].count += amount;

        recentDiv.innerHTML += `
          <div class="drop-entry">
            <img src="${chosen.image}" alt="${chosen.name}" />
            <div>${chosen.name} (${rarity}, +${amount})</div>
          </div>
        `;
      }

      player.dailyOpens++;
      savePlayer();
      pokazKarty();
    }

    function otworzLegendarnaSkrzynia() {
      if (player.gems < 50) {
        alert("Za ma≈Ço gem√≥w!");
        return;
      }
      const recentDiv = document.getElementById("recent-drops");
      recentDiv.innerHTML = `<h3>üéÅ Wypad≈Ço z legendarnej skrzyni:</h3>`;

      player.gems -= 50;

      const gold = getRandomInt(1, 350);
      player.gold += gold;
      recentDiv.innerHTML += `<div class="drop-entry"><strong>üí∞ ${gold} z≈Çota</strong></div>`;

      let availableLegends = cardPool["legendarna"].filter(card => {
        let data = player.cards[card.name];
        return !data || data.level < 4;
      });
      if (availableLegends.length === 0) {
        alert("Masz ju≈º wszystkie legendarne karty na max poziomie!");
        savePlayer();
        pokazKarty();
        return;
      }

      const chosen = availableLegends[getRandomInt(0, availableLegends.length - 1)];
      if (!player.cards[chosen.name]) {
        player.cards[chosen.name] = { count: 0, level: 1, rarity: "legendarna", image: chosen.image };
      }
      player.cards[chosen.name].count += 1;

      recentDiv.innerHTML += `
        <div class="drop-entry">
          <img src="${chosen.image}" alt="${chosen.name}" />
          <div>${chosen.name} (legendarna, +1)</div>
        </div>
      `;

      savePlayer();
      pokazKarty();
    }

    function otworzZlotaSkrzynie() {
  if (player.gold < 500) {
    alert("Nie masz wystarczajƒÖco z≈Çota!");
    return;
  }
  player.gold -= 500;

  const recentDiv = document.getElementById("recent-drops");
  recentDiv.innerHTML = `<h3>üéÅ Wypad≈Ço z ostatniej skrzynki:</h3>`;

  // Gemy
  const gems = getRandomInt(1, 10);
  player.gems += gems;
  recentDiv.innerHTML += `<div class="drop-entry"><strong>üíé ${gems} gem√≥w</strong></div>`;

 // 2 losowe rzadkie karty
for (let i = 0; i < 2; i++) {
  let availableCards = cardPool["rzadka"].filter(card => {
    let data = player.cards[card.name];
    return !data || data.level < 4;
  });
  if (availableCards.length === 0) continue; // je≈õli wszystkie sƒÖ na maxa, pomi≈Ñ

  const chosen = availableCards[getRandomInt(0, availableCards.length - 1)];
  const [min, max] = rarityConfig["rzadka"].amount;
  const amount = getRandomInt(min, max);

  if (!player.cards[chosen.name]) {
    player.cards[chosen.name] = { count: 0, level: 1, rarity: "rzadka", image: chosen.image };
  }
  player.cards[chosen.name].count += amount;

  recentDiv.innerHTML += `
    <div class="drop-entry">
      <img src="${chosen.image}" alt="${chosen.name}" />
      <div>${chosen.name} (rzadka, +${amount})</div>
    </div>
  `;
}


 // 2 losowe epickie karty
for (let i = 0; i < 2; i++) {
  let availableCards = cardPool["epicka"].filter(card => {
    let data = player.cards[card.name];
    return !data || data.level < 4;
  });
  if (availableCards.length === 0) continue;

  const chosen = availableCards[getRandomInt(0, availableCards.length - 1)];
  const [min, max] = rarityConfig["epicka"].amount;
  const amount = getRandomInt(min, max);

  if (!player.cards[chosen.name]) {
    player.cards[chosen.name] = { count: 0, level: 1, rarity: "epicka", image: chosen.image };
  }
  player.cards[chosen.name].count += amount;

  recentDiv.innerHTML += `
    <div class="drop-entry">
      <img src="${chosen.image}" alt="${chosen.name}" />
      <div>${chosen.name} (epicka, +${amount})</div>
    </div>
  `;
}
  savePlayer();
  pokazKarty();
}

function pokazKarty() {
      document.getElementById("gold-info").innerHTML = `üí∞ Z≈Çoto: ${player.gold}`;
      document.getElementById("gems-info").innerHTML = `üíé Gemy: ${player.gems}`;
      const container = document.getElementById("cards");
      container.innerHTML = ``;

      const rarityOrder = ["legendarna", "epicka", "rzadka", "pospolita"];
      const rarityNames = {
        legendarna: "üåü Legendarne",
        epicka: "üíé Epickie",
        rzadka: "üî∑ Rzadkie",
        pospolita: "‚ö™ Pospolite"
      };

      rarityOrder.forEach(rarity => {
        const totalCards = cardPool[rarity].length;

        // Liczymy ile kart gracz posiada (count > 0) w danej rzadko≈õci
        const ownedCardsCount = cardPool[rarity].filter(card => {
          return player.cards[card.name] && player.cards[card.name].count > 0;
        }).length;

        // Nag≈Ç√≥wek z licznikiem
        container.innerHTML += `<h2 style="width:100%;text-align:left;margin-top:20px;">
          ${rarityNames[rarity]} ${ownedCardsCount}/${totalCards}
        </h2>`;

        // Filtrujemy i pokazujemy tylko posiadane karty danej rzadko≈õci
        const rowCards = Object.entries(player.cards)
          .filter(([name, c]) => c.rarity === rarity && c.count > 0);

        if (rowCards.length > 0) {
          const rowDiv = document.createElement("div");
          rowDiv.style.display = "flex";
          rowDiv.style.flexWrap = "wrap";
          rowDiv.style.gap = "15px";
          rowDiv.style.marginBottom = "20px";

          rowCards.forEach(([name, c]) => {
            let cardClass = "card-entry";
            if (c.level === 2) cardClass += " level-two";
            if (c.level >= 3) cardClass += " max-level";
            if (c.level === 4) cardClass += " diamond-level";

            rowDiv.innerHTML += `
              <div class="${cardClass}" onclick="pokazOknoUlepszenia('${name}')">
                <img src="${c.image}" alt="${name}" />
                <div>${name}</div>
                <small>Lvl ${c.level}${c.level === 3 ? " (MAX)" : c.level === 4 ? " (DIAMENT)" : ""} ‚Ä¢ ${c.count} szt.</small>
                <small>${c.rarity}</small>
              </div>
            `;
          });

          container.appendChild(rowDiv);
        }
      });
    }
     let upgradeTarget = null;

   function pokazOknoUlepszenia(nazwa) {
  const karta = player.cards[nazwa];
  if (!karta) return;
  if (karta.level >= 4) {
    alert(`${nazwa} jest ju≈º na maksymalnym poziomie!`);
    return;
  }

  upgradeTarget = nazwa;
  const koszt = rarityConfig[karta.rarity].upgradeCost[karta.level];
  const wymagane = koszt.cards;
  const kosztZlota = koszt.gold || 0;
  const kosztGemow = koszt.gems || 0;

  // üîπ USTAWIENIE OBRAZKA I TYTU≈ÅU W MODALU
  document.getElementById("upgrade-img").src = karta.image;
  document.getElementById("upgrade-title").innerText = nazwa;

  let kosztTekst = [];
  if (kosztZlota > 0) kosztTekst.push(`${kosztZlota} z≈Çota`);
  if (kosztGemow > 0) kosztTekst.push(`${kosztGemow} gem√≥w`);

  document.getElementById("upgrade-info").innerText =
    `Masz ${karta.count} / ${wymagane} kart.
Potrzebujesz ${wymagane} kart i ${kosztTekst.join(" i ")}, aby ulepszyƒá na poziom ${karta.level + 1}.`;

  const btnUpgrade = document.querySelector(".btn-upgrade");
  btnUpgrade.innerText = `Ulepsz (${kosztTekst.join(" + ")})`;

  // üîπ POKAZANIE MODALU
  document.getElementById("upgrade-modal-bg").style.display = "flex";
}

    function closeUpgradeModal() {
      document.getElementById("upgrade-modal-bg").style.display = "none";
    }

    function confirmUpgrade() {
  const nazwa = upgradeTarget;
  const karta = player.cards[nazwa];
  const koszt = rarityConfig[karta.rarity].upgradeCost[karta.level];

  const potrzebneKarty = koszt.cards;
  const kosztZlota = koszt.gold || 0;
  const kosztGemow = koszt.gems || 0;

  // Sprawdzenie, czy gracz ma wystarczajƒÖce zasoby
  if (karta.count >= potrzebneKarty && player.gold >= kosztZlota && player.gems >= kosztGemow) {
    karta.count -= potrzebneKarty;
    player.gold -= kosztZlota;
    player.gems -= kosztGemow;
    karta.level++;

    if (karta.level === 3) {
      alert(`${nazwa} osiƒÖgnƒô≈Ça poziom MAX!`);
    } else if (karta.level === 4) {
      alert(`${nazwa} osiƒÖgnƒô≈Ça poziom MAX (Diamentowy)!`);
    }

    savePlayer();
    pokazKarty();
    closeUpgradeModal();
  } else {
    alert("Za ma≈Ço kart, z≈Çota lub gem√≥w.");
  }
}

    
    pokazKarty();
  </script>
</body>
</html>


















